# Add your additional Hyprland configurations here
# 
# This is an additional key binding 
# bind = $mainMod CTRL, up, workspace, empty
# 
# Example for xwayland
# xwayland {
#   force_zero_scaling = true
# }

# qt5ct environment variable
# env = QT_QPA_PLATFORMTHEME,qt5ct

# SDL version
env = SDL_VIDEODRIVER,wayland
# env = SDL_VIDEODRIVER,x11

# No Hardware Cursor
# cursor {
#     no_hardware_cursors = false
# }

# Load nwg-dock-hyprland
# Install it first with yay -S nwg-hyprland-dock
# exec-once = ~/.config/nwg-dock-hyprland/launch.sh


# keyboard abd touchpad
input {
    kb_layout = us,latam
    kb_variant =
    kb_model =
    kb_options = grp:alt_space_toggle
    numlock_by_default = true
    mouse_refocus = false

    follow_mouse = 1
    touchpad {
        natural_scroll = true
        middle_button_emulation = true
        clickfinger_behavior = false
        disable_while_typing = true
        scroll_factor = 1.0  # Touchpad scroll factor
    }
    sensitivity = 0 # Pointer speed: -1.0 - 1.0, 0 means no modification.
}



# shorcuts
bind = $mainMod, SPACE, exec, pkill rofi || rofi -show drun -replace -i # Open application launcher
bind = $mainMod, L, exec, hyprlock # Lock screen
bind = $mainMod SHIFT, Q, exec, wlogout # Start wlogout
bind = $mainMod, F1, exec, intellij-idea-ultimate-edition # Start IDE
bind = $mainMod, F2, exec, spotify # Start Spotify
bind = $mainMod, M, fullscreen, 1
bind = $mainMod, C, centerwindow
#bind = $mainMod, J, cyclenext
bind = $mainMod, ESCAPE, exit
#bind = $mainMod, R, forcerendererreload
bind = $mainMod, R, exec, hyprctl reload
unbind = $mainMod SHIFT, Q
bind = $mainMod SHIFT, Q, exec, hyprctl activewindow | grep pid | tr -d 'pid:'| xargs kill
bind = $mainMod SHIFT, RETURN, exec, WGPU_BACKEND=gl warp-terminal

# recordar cambiar la propiedad HandlePowerKey=ignore en /etc/systemd/logind.service y luego reinir systemd-logind.service 
bind = , XF86PowerOff, exec, wlogout

unbind = $mainMod, Tab
unbind = $mainMod SHIFT, Tab
bind = $mainMod, Tab, movefocus, r
unbind = $mainMod SHIFT, S
bind = $mainMod, S, exec, $HYPRSCRIPTS/screenshot.sh # Take a screenshot


# monitor
monitor=,1600x900@60,auto,1



# env vars

# se utiliza la tarjeta intel por defecto
#env = AQ_DRM_DEVICES,/dev/dri/card1:/dev/dri/card0
env = AQ_DRM_DEVICES,/dev/dri/card1


# reglas de ventana
#windowrulev2 = fullscreen, class:^(kitty)$
windowrulev2 = fullscreen, class:^(whatsdesk)$
windowrulev2 = maximize, class:^(jetbrains-idea)$

windowrulev2 = workspace 1, class:^(kitty)$
windowrulev2 = workspace 2, class:^(jetbrains-idea)$
windowrulev2 = workspace 3, class:^(google-chrome)$
windowrulev2 = workspace 4, class:^(Brave-browser)$
windowrulev2 = workspace 5, class:^(org.gnome.Nautilus)$
windowrulev2 = workspace 8, class:^(Spotify)$
windowrulev2 = workspace 9, class:^(whatsdesk)$
windowrulev2 = noborder on, fullscreenstate:* 1



# reglas de workspace
workspace = 1, layoutopt:orientation:center
workspace = 1, name:terminal
workspace = 1, defaultName:terminal
workspace = 1, border:false
workspace = 1, gapsin:0
workspace = 1, gapsout:0
workspace = 1, shadow:false
workspace = 1, decorate:false
workspace = 1, rounding:false

workspace = 2, name:ide
workspace = 2, defaultName:ide

#workspace = 9, layoutopt:orientation:center
workspace = 9, name:rrss
workspace = 9, defaultName:rrss
workspace = 9, border:false
workspace = 9, gapsin:5
workspace = 9, gapsout:5
workspace = 9, shadow:false
workspace = 9, decorate:false
workspace = 9, rounding:false

# layout
general {
    gaps_in = 10
    gaps_out = 14
    border_size = 2
    col.active_border = $color11
    col.inactive_border = rgba(ffffffff)
    layout = master
    #layout = hy3
    resize_on_border = true
}

dwindle {
    pseudotile = false                      # Enable pseudotiling: Pseudotiled windows retain their floating size when tiled.
    force_split = 1                         # 0 -> Split follows mouse, 1 -> Always split to the left/top, 2 -> Always split to the right/bottom.
    preserve_split = false                  # If enabled, the split (side/top) will not change regardless of what happens to the container.
    smart_split = false                     # Allows precise control over split direction based on the cursor’s position (divides window into triangles).
    smart_resizing = false                   # Resizing direction is determined by the mouse’s position on the window (nearest corner).
    permanent_direction_override = false   # Makes the preselect direction persist until changed or reset.
    special_scale_factor = 1               # Specifies the scale factor of windows on the special workspace [0 - 1].
    split_width_multiplier = 1.0           # Specifies the auto-split width multiplier.
    use_active_for_splits = false           # Whether to prefer the active window or the mouse position for splits.
    default_split_ratio = 1.0              # The default split ratio on window open (1 means an even 50/50 split) [0.1 - 1.9].
    split_bias = 1                         # Specifies which window receives the larger half of a split: 0 -> positional, 1 -> current, 2 -> opening.
}


master {
    allow_small_split = false                 # Enable adding additional master windows in a horizontal split style
    special_scale_factor = 1.0               # The scale of the special workspace windows. [0.0 - 1.0]
    mfact = 0.5                              # The size as a percentage of the master window (e.g., 0.55 means 55% master, 45% slave)
    new_status = slave                        # New window status: master, slave, or inherit from focused window
    new_on_top = false                        # Whether a newly opened window should be on the top of the stack
    new_on_active = none                      # Placement of new window: before, after, or none
    orientation = left                        # Default placement of the master area: left, right, top, bottom, or center
    inherit_fullscreen = true                 # Inherit fullscreen status when cycling/swapping to another window
    always_center_master = false              # Keep the master window centered when orientation=center and it's the only window
    smart_resizing = false                     # Determine resizing direction based on mouse position on the window
    drop_at_cursor = true                     # Place dragged/dropped windows at cursor position or stack top/bottom
}

bind = $mainMod, K, layoutmsg, swapwithmaster master

plugin {
  hy3 {
    # disable gaps when only one window is onscreen
    # 0 - always show gaps
    # 1 - hide gaps with a single window onscreen
    # 2 - 1 but also show the window border
    no_gaps_when_only = 0 # default: 0

    # policy controlling what happens when a node is removed from a group,
    # leaving only a group
    # 0 = remove the nested group
    # 1 = keep the nested group
    # 2 = keep the nested group only if its parent is a tab group
    node_collapse_policy = 2 # default: 2

    # offset from group split direction when only one window is in a group
    group_inset = 10 # default: 10

    # if a tab group will automatically be created for the first window spawned in a workspace
    tab_first_window = false

    # tab group settings
    tabs {
      # height of the tab bar
      height = 15 # default: 15

      # padding between the tab bar and its focused node
      padding = 5 # default: 5

      # the tab bar should animate in/out from the top instead of below the window
      from_top = false # default: false

      # rounding of tab bar corners
      rounding = 3 # default: 3

      # render the window title on the bar
      render_text = true # default: true

      # center the window title
      text_center = false # default: false

      # font to render the window title with
      text_font = Sans # default: Sans

      # height of the window title
      text_height = 8 # default: 8

      # left padding of the window title
      text_padding = 3 # default: 3

      # active tab bar segment color
      col.active = 0xff32b4ff # default: 0xff32b4ff

      # urgent tab bar segment color
      col.urgent = 0xffff4f4f # default: 0xffff4f4f

      # inactive tab bar segment color
      col.inactive = 0x80808080 # default: 0x80808080

      # active tab bar text color
      col.text.active = 0xff000000 # default: 0xff000000

      # urgent tab bar text color
      col.text.urgent = 0xff000000 # default: 0xff000000

      # inactive tab bar text color
      col.text.inactive = 0xff000000 # default: 0xff000000
    }

    # autotiling settings
    autotile {
      # enable autotile
      enable = false # default: false

      # make autotile-created groups ephemeral
      ephemeral_groups = true # default: true

      # if a window would be squished smaller than this width, a vertical split will be created
      # -1 = never automatically split vertically
      # 0 = always automatically split vertically
      # <number> = pixel width to split at
      trigger_width = 0 # default: 0

      # if a window would be squished smaller than this height, a horizontal split will be created
      # -1 = never automatically split horizontally
      # 0 = always automatically split horizontally
      # <number> = pixel height to split at
      trigger_height = 0 # default: 0

      # a space or comma separated list of workspace ids where autotile should be enabled
      # it's possible to create an exception rule by prefixing the definition with "not:"
      # workspaces = 1,2 # autotiling will only be enabled on workspaces 1 and 2
      # workspaces = not:1,2 # autotiling will be enabled on all workspaces except 1 and 2
      workspaces = all # default: all
    }
  }
}


group {
    auto_group = false                         # Automatically group new windows into the focused unlocked group
    insert_after_current = true               # New windows in a group spawn after the current window
    focus_removed_window = true               # Focus on the window that has just been moved out of the group
    drag_into_group = 1                       # 0 = disabled, 1 = enabled, 2 = only via groupbar
    merge_groups_on_drag = true               # Allow dragging one group into another
    merge_groups_on_groupbar = true           # Merge groups when dragged into another's groupbar
    merge_floated_into_tiled_on_groupbar = false  # Disable merging floating windows into tiled groups via groupbar
    group_on_movetoworkspace = false          # Disable merging windows into a workspace’s solitary unlocked group

    # Colors for group borders
    col.border_active = 0x66ffff00            # Active group border color
    col.border_inactive = 0x66777700          # Inactive group border color
    col.border_locked_active = 0x66ff5500     # Active locked group border color
    col.border_locked_inactive = 0x66775500   # Inactive locked group border color

}



# executions
# instalar socat
exec-once = /home/martin/.config/hypr/scripts/workspace_1_rules.sh & 
exec-once = hyprpm reload -n


# plugins

bind = $mainMod, W, hyprexpo:expo, toggle # can be: toggle, off/disable or on/enable

plugin {
    hyprexpo {
        columns = 2
        gap_size = 10
        bg_col = rgb(000000)
        workspace_method = center current # [center/first] [workspace] e.g. first 1 or center m+1

        enable_gesture = true # laptop touchpad
        gesture_fingers = 3  # 3 or 4
        gesture_distance = 300 # how far is the "max"
        gesture_positive = true # positive = swipe down. Negative = swipe up.
    }
}

plugin {
    hyprbars {
        # example config
        bar_height = 60

        # example buttons (R -> L)
        # hyprbars-button = color, size, on-click
        hyprbars-button = rgb(ff4040), 10, 󰖭, hyprctl dispatch killactive
        hyprbars-button = rgb(eeee11), 10, , hyprctl dispatch fullscreen 1
    }
}

plugin {
    borders-plus-plus {
        add_borders = 1 # 0 - 9

        # you can add up to 9 borders
        col.border_1 = rgb(ffffff)
        col.border_2 = rgb(2222ff)

        # -1 means "default" as in the one defined in general:border_size
        border_size_1 = 10
        border_size_2 = -1

        # makes outer edges match rounding of the parent. Turn on / off to better understand. Default = on.
        natural_rounding = yes
    }
}
